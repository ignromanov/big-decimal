<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>BigDecimal Playground</title>
    <script src="../dist/big-decimal.umd.cjs"></script>
    <style>
      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          Oxygen, Ubuntu, Cantarell, sans-serif;
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
        background: #f5f5f5;
      }
      .container {
        background: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }
      .config-section,
      .input-section,
      .presets-section,
      .operations-section {
        margin-bottom: 20px;
        padding: 15px;
        border: 1px solid #ddd;
        border-radius: 4px;
      }
      h2 {
        margin-top: 0;
        color: #333;
      }
      .form-group {
        margin-bottom: 10px;
      }
      label {
        display: inline-block;
        width: 150px;
        margin-right: 10px;
      }
      input,
      select {
        padding: 5px;
        border: 1px solid #ddd;
        border-radius: 4px;
        width: 200px;
      }
      button {
        padding: 8px 15px;
        background: #007bff;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        margin: 2px;
      }
      button:hover {
        background: #0056b3;
      }
      #result {
        margin-top: 20px;
        padding: 10px;
        background: #f8f9fa;
        border-radius: 4px;
        white-space: pre-wrap;
      }
      .preset-button {
        margin: 5px;
        padding: 5px 10px;
        background: #6c757d;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
      }
      .preset-button:hover {
        background: #5a6268;
      }
      .operation-button {
        background: #28a745;
      }
      .operation-button:hover {
        background: #218838;
      }
      .format-button {
        background: #17a2b8;
      }
      .format-button:hover {
        background: #138496;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>BigDecimal Playground</h1>

      <div class="config-section">
        <h2>Configuration</h2>
        <div class="form-group">
          <label>DECIMAL_PLACES:</label>
          <input type="number" id="decimalPlaces" value="20" />
        </div>
        <div class="form-group">
          <label>ROUNDING_MODE:</label>
          <input type="number" id="roundingMode" value="4" />
        </div>
        <div class="form-group">
          <label>EXPONENTIAL_AT:</label>
          <input type="text" id="exponentialAt" value="[-7, 20]" />
        </div>
        <div class="form-group">
          <label>RANGE:</label>
          <input type="text" id="range" value="[-1e9, 1e9]" />
        </div>
        <div class="form-group">
          <label>ALPHABET:</label>
          <input
            type="text"
            id="alphabet"
            value="0123456789abcdefghijklmnopqrstuvwxyz"
          />
        </div>
        <button onclick="updateConfig()">Update Configuration</button>
      </div>

      <div class="input-section">
        <h2>Input</h2>
        <div class="form-group">
          <label>Value 1:</label>
          <input type="text" id="input1" placeholder="Enter first number" />
        </div>
        <div class="form-group">
          <label>Value 2:</label>
          <input type="text" id="input2" placeholder="Enter second number" />
        </div>
        <div class="form-group">
          <label>Base (optional):</label>
          <input type="number" id="base" placeholder="Enter base (2-36)" />
        </div>
      </div>

      <div class="operations-section">
        <h2>Operations</h2>
        <div>
          <button class="operation-button" onclick="performOperation('add')">
            Add (+)
          </button>
          <button
            class="operation-button"
            onclick="performOperation('subtract')"
          >
            Subtract (-)
          </button>
          <button
            class="operation-button"
            onclick="performOperation('multiply')"
          >
            Multiply (ร)
          </button>
          <button class="operation-button" onclick="performOperation('divide')">
            Divide (รท)
          </button>
        </div>
        <div>
          <button
            class="operation-button"
            onclick="performOperation('compare')"
          >
            Compare
          </button>
          <button class="operation-button" onclick="performOperation('max')">
            Max
          </button>
          <button class="operation-button" onclick="performOperation('min')">
            Min
          </button>
          <button class="operation-button" onclick="performOperation('negate')">
            Negate
          </button>
        </div>
        <div>
          <button class="format-button" onclick="formatNumber('toString')">
            toString()
          </button>
          <button class="format-button" onclick="formatNumber('toFixed')">
            toFixed(2)
          </button>
          <button class="format-button" onclick="formatNumber('toExponential')">
            toExponential()
          </button>
          <button class="format-button" onclick="formatNumber('toEngineering')">
            toEngineering()
          </button>
        </div>
      </div>

      <div class="presets-section">
        <h2>Preset Test Cases</h2>
        <div id="presets">
          <!-- Presets will be added here by JavaScript -->
        </div>
      </div>

      <div id="result"></div>
    </div>

    <script>
      // Initialize BigDecimalFactory with default configuration
      function initBD() {
        try {
          const config = {
            DECIMAL_PLACES: parseInt(
              document.getElementById("decimalPlaces").value
            ),
            ROUNDING_MODE: parseInt(
              document.getElementById("roundingMode").value
            ),
            EXPONENTIAL_AT: JSON.parse(
              document.getElementById("exponentialAt").value
            ),
            RANGE: JSON.parse(document.getElementById("range").value),
            ALPHABET: document.getElementById("alphabet").value,
            DEBUG: true,
          };

          window.BigDecimal.BigDecimalFactory.config(config);
          return true;
        } catch (error) {
          document.getElementById(
            "result"
          ).textContent = `Configuration Error: ${error.message}`;
          return false;
        }
      }

      // Update configuration
      function updateConfig() {
        if (initBD()) {
          document.getElementById("result").textContent =
            "Configuration updated successfully!";
        }
      }

      // Get input values
      function getInputs() {
        const base = document.getElementById("base").value;
        return {
          value1: document.getElementById("input1").value,
          value2: document.getElementById("input2").value,
          base: base ? parseInt(base) : undefined,
        };
      }

      // Perform arithmetic operations
      function performOperation(op) {
        try {
          if (!initBD()) return;

          const { value1, value2, base } = getInputs();
          const num1 = window.BigDecimal.BigDecimalFactory.create(value1, base);
          const num2 = window.BigDecimal.BigDecimalFactory.create(value2, base);

          let result;
          switch (op) {
            case "add":
              result = num1.add(num2);
              break;
            case "subtract":
              result = num1.subtract(num2);
              break;
            case "multiply":
              result = num1.multiply(num2);
              break;
            case "divide":
              result = num1.divide(num2);
              break;
            case "compare":
              result = `${num1} ${
                num1.compareTo(num2) === 0
                  ? "="
                  : num1.compareTo(num2) > 0
                  ? ">"
                  : "<"
              } ${num2}`;
              break;
            case "max":
              result = num1.max(num2);
              break;
            case "min":
              result = num1.min(num2);
              break;
            case "negate":
              result = num1.negate();
              break;
          }

          document.getElementById("result").textContent = `${op}: ${result}`;
        } catch (error) {
          document.getElementById(
            "result"
          ).textContent = `Error: ${error.message}`;
        }
      }

      // Format numbers
      function formatNumber(format) {
        try {
          if (!initBD()) return;

          const { value1, base } = getInputs();
          const num = window.BigDecimal.BigDecimalFactory.create(value1, base);

          let result;
          switch (format) {
            case "toString":
              result = num.toString();
              break;
            case "toFixed":
              result = num.toFixed(2);
              break;
            case "toExponential":
              result = num.toExponential();
              break;
            case "toEngineering":
              result = num.toEngineering();
              break;
          }

          document.getElementById(
            "result"
          ).textContent = `${format}: ${result}`;
        } catch (error) {
          document.getElementById(
            "result"
          ).textContent = `Error: ${error.message}`;
        }
      }

      // Preset test cases
      const presets = [
        { value: "Infinity", label: "Infinity" },
        { value: "-Infinity", label: "-Infinity" },
        { value: "NaN", label: "NaN" },
        { value: "0", label: "Zero" },
        { value: "1", label: "One" },
        { value: "-1", label: "Negative One" },
        { value: "1.23e2", label: "Scientific 1.23e2" },
        { value: "0xFF", base: 16, label: "Hex 0xFF" },
        { value: "0b11", base: 2, label: "Binary 0b11" },
        { value: "zz", base: 36, label: "Base36 zz" },
        { value: "123.456", label: "Decimal 123.456" },
        { value: "0.000123", label: "Small 0.000123" },
        { value: "1e15", label: "Large 1e15" },
        { value: "3.14159", label: "Pi (approx)" },
        { value: "2.71828", label: "E (approx)" },
      ];

      // Add preset buttons
      function addPresets() {
        const presetsDiv = document.getElementById("presets");
        presets.forEach((preset) => {
          const button = document.createElement("button");
          button.className = "preset-button";
          button.textContent = preset.label;
          button.onclick = () => {
            document.getElementById("input1").value = preset.value;
            document.getElementById("base").value = preset.base || "";
            formatNumber("toString");
          };
          presetsDiv.appendChild(button);
        });
      }

      // Initialize
      window.onload = () => {
        initBD();
        addPresets();
      };
    </script>
  </body>
</html>
